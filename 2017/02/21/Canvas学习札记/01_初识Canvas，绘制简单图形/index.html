<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="Jay.M.Hu"><meta name="description" itemprop="description" content="0、关于Canvas&amp;lt;canvas&amp;gt; 是HTML5新增的一个标签，用于定义图形，比如图表和其他图像。
&amp;lt;canvas&amp;gt; 标签只是图形容器，必须要使用脚本来绘制图形。
一句话概括就是：&amp;lt;canvas&amp;gt; 是浏览器上的画图，允许你通过js自由作画。
Canvas和SVG"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>01_初识Canvas，绘制简单图形 · Love life, love coding~</title><link rel="stylesheet" type="text/css" href="/blog/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/blog/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"></head><body><header><a href="/blog/"><img class="logo" src="https://avatars1.githubusercontent.com/u/4043284?v=3&amp;s=460" alt="幻☆精灵的Blog" title="幻☆精灵的Blog"></a><h1><a href="/blog/" alt="幻☆精灵的Blog" title="幻☆精灵的Blog">幻☆精灵的Blog</a></h1><p>Love life, love coding~</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="links" alt="链接" title="链接">链接</a></li><li><a href="about" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://github.com/hstarorg" style="position: relative; top: -2px;">&#xe735;</a><a target="_blank" href="https://twitter.com/Hstar19">&#xe71f;</a><a target="_blank" href="https://www.facebook.com/100015363883648">&#xe60b;</a><a target="_blank" href="https://www.zhihu.com/people/hstar">&#xe63f;</a><a target="_blank" href="https://weibo.com/hstarorg" style="position: relative; top: -2px;">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>01_初识Canvas，绘制简单图形</h1><span class="post-meta">写于<time> 2017 年 02 月 21 日 14 时 47 分</time><br>更新于<time> 2017 年 02 月 21 日 14 时 47 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0、关于Canvas"><span class="toc-number">1.</span> <span class="toc-text">0、关于Canvas</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Canvas和SVG与VML的不同"><span class="toc-number">1.1.</span> <span class="toc-text">Canvas和SVG与VML的不同</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Canvas兼容HTML5标准属性和事件"><span class="toc-number">1.2.</span> <span class="toc-text">Canvas兼容HTML5标准属性和事件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1、使用Canvas"><span class="toc-number">2.</span> <span class="toc-text">1、使用Canvas</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1、绘制矩形"><span class="toc-number">2.1.</span> <span class="toc-text">1.1、绘制矩形</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2、绘制线条"><span class="toc-number">2.2.</span> <span class="toc-text">1.2、绘制线条</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3、绘制矩形线条"><span class="toc-number">2.3.</span> <span class="toc-text">1.3、绘制矩形线条</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-4、绘制圆弧"><span class="toc-number">2.4.</span> <span class="toc-text">1.4、绘制圆弧</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、其他"><span class="toc-number">3.</span> <span class="toc-text">2、其他</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1、canvas检查支持性"><span class="toc-number">3.1.</span> <span class="toc-text">2.1、canvas检查支持性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2、canvas的width和height属性"><span class="toc-number">3.2.</span> <span class="toc-text">2.2、canvas的width和height属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-3、来个好玩的，画个桃心"><span class="toc-number">3.3.</span> <span class="toc-text">2.3、来个好玩的，画个桃心</span></a></li></ol></li></ol></div><h2 id="0、关于Canvas"><a href="#0、关于Canvas" class="headerlink" title="0、关于Canvas"></a>0、关于Canvas</h2><p><code>&lt;canvas&gt;</code> 是HTML5新增的一个标签，用于定义图形，比如图表和其他图像。</p>
<p><code>&lt;canvas&gt;</code> 标签只是图形容器，必须要使用脚本来绘制图形。</p>
<p>一句话概括就是：<code>&lt;canvas&gt;</code> 是浏览器上的画图，允许你通过js自由作画。</p>
<h3 id="Canvas和SVG与VML的不同"><a href="#Canvas和SVG与VML的不同" class="headerlink" title="Canvas和SVG与VML的不同"></a>Canvas和SVG与VML的不同</h3><p><code>&lt;canvas&gt;</code> 有一个基于JS的绘图API，它本身并不会绘制图形。SVG和VML都是用一个XML文档来描述图形。</p>
<p>虽然它们在功能上基本相同，但是从表面上来看，它们非常不同。SVG和VML绘图易于编辑，只需要从描述中修改元素属性。而Canvas想移除元素，往往需要擦掉绘图重新绘制它。</p>
<h3 id="Canvas兼容HTML5标准属性和事件"><a href="#Canvas兼容HTML5标准属性和事件" class="headerlink" title="Canvas兼容HTML5标准属性和事件"></a>Canvas兼容HTML5标准属性和事件</h3><p><code>&lt;canvas&gt;</code> 作为一个HTML的新标签，标准的HTML属性和事件它都支持。比如可以设置 <code>title、style、class</code> 等属性，也可以使用诸如 <code>onclick</code> 等事件。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Canvas Test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">body</span>&#123;</div><div class="line">      <span class="attribute">text-align</span>: center;</div><div class="line">    &#125;</div><div class="line">    <span class="selector-class">.c1</span>&#123;</div><div class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid red;</div><div class="line">      <span class="attribute">height</span>: <span class="number">600px</span>;</div><div class="line">      <span class="attribute">width</span>: <span class="number">800px</span>;</div><div class="line">    &#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"c1"</span> <span class="attr">onclick</span>=<span class="string">"alert('abc')"</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="1、使用Canvas"><a href="#1、使用Canvas" class="headerlink" title="1、使用Canvas"></a>1、使用Canvas</h2><p>要使用<code>canvas</code>，首先，我们先得html中加入canvas标签。最好，再加上一个id属性（也可以不加，只是查找该元素要稍微麻烦点）。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"c1"</span> <span class="attr">onclick</span>=<span class="string">"alert('abc')"</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> c1 =<span class="built_in">document</span>.getElementById(<span class="string">'c1'</span>);</div><div class="line">    <span class="comment">// 如果不用id属性，我们可以用如下方式来获取canvas对象</span></div><div class="line">    <span class="comment">//var c1 = document.getElementsByTagName('canvas')[0]; </span></div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p>在获取到 <code>canvas</code> 元素之后，我们需要通过 <code>getContext(contextID)</code> 方法获取到画布。</p>
<p>当前 <code>contextID</code>的值仅仅可以用’2d’，在未来，可能会允许传递’3d’，来进行三维绘图。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"c1"</span> <span class="attr">onclick</span>=<span class="string">"alert('abc')"</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></div><div class="line">    <span class="keyword">var</span> c1 =<span class="built_in">document</span>.getElementById(<span class="string">'c1'</span>);</div><div class="line">    <span class="comment">// 如果不用id属性，我们可以用如下方式来获取canvas对象</span></div><div class="line">    <span class="comment">//var c1 = document.getElementsByTagName('canvas')[0];</span></div><div class="line">    <span class="keyword">var</span> context = c1.getContext(<span class="string">'2d'</span>);</div><div class="line">    <span class="built_in">console</span>.log(context); <span class="comment">//可以看到context是一个CanvasRenderingContext2D对象</span></div><div class="line">  <span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line">...</div></pre></td></tr></table></figure>
<p><code>CanvasRenderingContext2D</code> 对象实现了一个画布所使用的大多数方法。现在我们就需要对它来进行使用，将图像绘制到浏览器上。</p>
<h3 id="1-1、绘制矩形"><a href="#1-1、绘制矩形" class="headerlink" title="1.1、绘制矩形"></a>1.1、绘制矩形</h3><p>关于矩形的绘制，主要有三个方法：</p>
<ul>
<li>fillRect(x, y, width, height) 用于填充矩形</li>
<li>strokeRect(x, y, width, height) 用于绘制矩形边框</li>
<li>clearRect(x, y, width, height) 用于清空矩形区域（设置矩形区域为空白）</li>
</ul>
<p>其中 <code>x,y</code>表示从那个点开始绘制。<code>width,height</code> 表示矩形的宽度和高度。</p>
<p>要设置矩形的填充颜色，需要通过 <code>fillStyle</code> 来控制，支持 <code>&#39;red&#39;, &#39;#fff&#39;, &#39;rgb(10,10,10)&#39;, &#39;rgba(10,10,10,10,0.5)&#39;</code>等多种颜色属性。</p>
<p>要设置矩形的边框颜色，需要通过 <code>strokeStyle</code> 来控制，属性值和 <code>fillStyle</code> 一致。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line"><span class="comment">//绘制红色矩形</span></div><div class="line">context.fillStyle = <span class="string">'red'</span>; </div><div class="line">context.fillRect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line"></div><div class="line"><span class="comment">//绘制蓝色矩形框</span></div><div class="line">context.strokeStyle = <span class="string">'blue'</span>;</div><div class="line">context.strokeRect(<span class="number">150</span>,<span class="number">150</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line"></div><div class="line"><span class="comment">//清空矩形区域（设置矩形区域为空白）</span></div><div class="line">context.clearRect(<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>,<span class="number">100</span>);</div><div class="line">...</div></pre></td></tr></table></figure>
<h3 id="1-2、绘制线条"><a href="#1-2、绘制线条" class="headerlink" title="1.2、绘制线条"></a>1.2、绘制线条</h3><p>我们可以通过 <code>lineTo(x, y)</code> 绘制直线。两点成直线，绘制直线需要两个点，所以我们需要先设置一个起点，一般来说，我们使用 <code>moveTo(x, y)</code> 设置笔触的位置。当然，你也可以用 <code>lineTo(x, y)</code> 来设置一个笔触点。</p>
<p>在没有设置笔触的场景下，以下两段代码的效果完全一致：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画线，设置起点。</span></div><div class="line">context.moveTo(<span class="number">200</span>, <span class="number">200</span>);</div><div class="line"><span class="comment">//设置轨迹</span></div><div class="line">context.lineTo(<span class="number">500</span>,<span class="number">500</span>);</div><div class="line"><span class="comment">//画线</span></div><div class="line">context.stroke();</div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//画线，设置起点。</span></div><div class="line">context.lineTo(<span class="number">200</span>, <span class="number">200</span>);</div><div class="line"><span class="comment">//设置轨迹</span></div><div class="line">context.lineTo(<span class="number">500</span>,<span class="number">500</span>);</div><div class="line"><span class="comment">//画线</span></div><div class="line">context.stroke();</div></pre></td></tr></table></figure>
<p><strong>一般来说，我们会在 <code>canvas</code> 初始化或者 <code>beginPath()</code> 调用后，通过 <code>moveTo(x, y)</code> 来设置一个初始笔触点。</strong></p>
<p>要同时绘制多个线条，我们应该通过 <code>beginPath()</code> 来建立路径。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//用线条绘制了一个矩形</span></div><div class="line">context.beginPath();</div><div class="line">context.moveTo(<span class="number">400</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">450</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">450</span>, <span class="number">450</span>);</div><div class="line">context.lineTo(<span class="number">400</span>, <span class="number">450</span>);</div><div class="line">context.closePath();</div><div class="line"><span class="comment">//真实的绘图</span></div><div class="line">context.stroke();</div></pre></td></tr></table></figure>
<p>看了以上的代码，可能会有一个疑惑，为什么仅仅三个线条就构成了一个矩形呢？</p>
<p>原因在于当调用 <code>closePath()</code> 的时候，会把最后的笔触点和最开始的笔触点连接在一起，这个时候也就构成了第四条直线。</p>
<p> <strong>注意：当前路径为空，即调用beginPath()之后，或者canvas刚建的时候，第一条路径构造命令通常被视为是moveTo（），无论最后的是什么。出于这个原因，你几乎总是要在设置路径之后专门指定你的起始位置。</strong></p>
<p> <strong>闭合路径 <code>closePath()</code>,不是必需的。这个方法会通过绘制一条从当前点到开始点的直线来闭合图形。如果图形是已经闭合了的，即当前点为开始点，该函数什么也不做。</strong></p>
<p> <strong>当你调用 <code>fill()</code> 函数时，所有没有闭合的形状都会自动闭合，所以你不需要调用 <code>closePath()</code> 函数。但是调用stroke()时不会自动闭合。</strong></p>
<p>再来填充一个梯形玩玩：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">context.beginPath();</div><div class="line">context.moveTo(<span class="number">100</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">200</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">250</span>, <span class="number">500</span>);</div><div class="line">context.lineTo(<span class="number">50</span>, <span class="number">500</span>);</div><div class="line">context.fill();</div></pre></td></tr></table></figure>
<h3 id="1-3、绘制矩形线条"><a href="#1-3、绘制矩形线条" class="headerlink" title="1.3、绘制矩形线条"></a>1.3、绘制矩形线条</h3><p>矩形线条是一个比较常用的图形，所以提供了一个简单的方法来直接绘制：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//绘制矩形线条</span></div><div class="line">context.beginPath();</div><div class="line">context.rect(<span class="number">700</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</div><div class="line">context.stroke();</div><div class="line">context.fillStyle = <span class="string">'red'</span>;</div><div class="line">context.fill();</div></pre></td></tr></table></figure>
<h3 id="1-4、绘制圆弧"><a href="#1-4、绘制圆弧" class="headerlink" title="1.4、绘制圆弧"></a>1.4、绘制圆弧</h3><p>绘制圆弧或者圆的时候，我们可以使用如下方法：</p>
<ul>
<li>arc(x, y, radius, startAngle, endAngle, anticlockwise) 画一个以（x,y）为圆心的以radius为半径的圆弧（圆），从startAngle开始到endAngle结束，按照anticlockwise给定的方向（默认为顺时针）来生成。</li>
<li>arcTo(x1, y1, x2, y2, radius) 根据给定的控制点和半径画一段圆弧，再以直线连接两个控制点。</li>
</ul>
<p>anticlockwise为true则表示逆时针绘制。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//绘制圆弧</span></div><div class="line">context.beginPath();</div><div class="line">context.arc(<span class="number">550</span>, <span class="number">150</span>, <span class="number">100</span>, getRadian(<span class="number">90</span>) , getRadian(<span class="number">360</span>), <span class="literal">false</span>);</div><div class="line">context.stroke();</div><div class="line">context.beginPath();</div><div class="line">context.arc(<span class="number">550</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">0</span>, getRadian(<span class="number">90</span>), <span class="literal">false</span>);</div><div class="line">context.fill();</div></pre></td></tr></table></figure>
<p>以上代码，绘制了两个弧形，一个空心，一个实心。一般再绘制圆弧的时候就不要执行 <code>moveTo(x, y)</code>，否则绘制终点会被连接到这个触点上。</p>
<p><strong>注意：在arc函数中，<code>startAngle</code> 和 <code>endAngle</code> 属性值都是弧度，而不是我们所熟知的角度。所以我们一个一个角度转换为弧度的函数，如下：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRadian</span>(<span class="params">degrees<span class="regexp">/*角度值*/</span></span>)</span>&#123;</div><div class="line">  <span class="keyword">return</span> (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * degrees;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><strong>arcTo没吃透，暂时描述不出来，先简单看看示例：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//绘制圆弧（必须要设定起始点）</span></div><div class="line">context.beginPath();</div><div class="line">context.fillRect(<span class="number">600</span>, <span class="number">400</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">context.fillRect(<span class="number">700</span>, <span class="number">500</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">context.fillStyle = <span class="string">'blue'</span>;</div><div class="line">context.fillRect(<span class="number">700</span>, <span class="number">400</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line"></div><div class="line">context.beginPath();</div><div class="line">context.moveTo(<span class="number">700</span>, <span class="number">400</span>);</div><div class="line">context.arcTo(<span class="number">600</span>, <span class="number">600</span>, <span class="number">700</span>, <span class="number">700</span>, <span class="number">500</span>);</div><div class="line">context.stroke();</div></pre></td></tr></table></figure>
<h2 id="2、其他"><a href="#2、其他" class="headerlink" title="2、其他"></a>2、其他</h2><h3 id="2-1、canvas检查支持性"><a href="#2-1、canvas检查支持性" class="headerlink" title="2.1、canvas检查支持性"></a>2.1、canvas检查支持性</h3><p>如果仅仅需要在UI上体现，那么我们可以在 <code>&lt;canvas&gt;</code> 标签内部放置元素，如果浏览器不支持 <code>&lt;canvas&gt;</code> 标签，那么内部的元素就会被浏览器解析，而显示出来。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"stockGraph"</span> <span class="attr">width</span>=<span class="string">"150"</span> <span class="attr">height</span>=<span class="string">"150"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>Canvas not be support.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div></pre></td></tr></table></figure>
<p>除此之外，我们也可以用js的方式来检查。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> c1 = <span class="built_in">document</span>.getElementById(<span class="string">'c1'</span>);</div><div class="line"><span class="comment">//如果canvas元素没有getContext方法，那么就证明浏览器不支持canvas。</span></div><div class="line"><span class="keyword">if</span>(!c1.getContext)&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'Canvas not be support.'</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="2-2、canvas的width和height属性"><a href="#2-2、canvas的width和height属性" class="headerlink" title="2.2、canvas的width和height属性"></a>2.2、canvas的width和height属性</h3><p><code>&lt;canvas&gt;</code> 对象有两个比较特别的属性，<code>width、height</code>，这两者用于控制画布的大小，width的默认值是300，height的默认值为150。<strong>当这两个属性值有变化时，在该画布上已经完成的任何绘图都会擦除掉。</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> c1 = <span class="built_in">document</span>.getElementById(<span class="string">'c1'</span>);</div><div class="line"><span class="built_in">console</span>.log(<span class="string">'default width:'</span>, c1.width, <span class="string">'; default height:'</span>, c1.height);</div><div class="line">c1.width = <span class="number">500</span>;</div><div class="line">c1.height = <span class="number">600</span>;</div></pre></td></tr></table></figure>
<p><code>&lt;canvas&gt;</code> 的的height和width属性如果和用css设置的height和width样式不一致，那么就可能会产生扭曲。</p>
<h3 id="2-3、来个好玩的，画个桃心"><a href="#2-3、来个好玩的，画个桃心" class="headerlink" title="2.3、来个好玩的，画个桃心"></a>2.3、来个好玩的，画个桃心</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawHeart</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  context.fillStyle = <span class="string">'purple'</span>;</div><div class="line">  <span class="comment">//三次曲线</span></div><div class="line">  context.beginPath();</div><div class="line">  context.moveTo(<span class="number">75</span>, <span class="number">40</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">75</span>, <span class="number">37</span>, <span class="number">70</span>, <span class="number">25</span>, <span class="number">50</span>, <span class="number">25</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">20</span>, <span class="number">25</span>, <span class="number">20</span>, <span class="number">62.5</span>, <span class="number">20</span>, <span class="number">62.5</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">20</span>, <span class="number">80</span>, <span class="number">40</span>, <span class="number">102</span>, <span class="number">75</span>, <span class="number">120</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">110</span>, <span class="number">102</span>, <span class="number">130</span>, <span class="number">80</span>, <span class="number">130</span>, <span class="number">62.5</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">130</span>, <span class="number">62.5</span>, <span class="number">130</span>, <span class="number">25</span>, <span class="number">100</span>, <span class="number">25</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">85</span>, <span class="number">25</span>, <span class="number">75</span>, <span class="number">37</span>, <span class="number">75</span>, <span class="number">40</span>);</div><div class="line">  context.fill();</div><div class="line">&#125;</div><div class="line">drawHeart();</div><div class="line"><span class="string">``</span><span class="string">` </span></div><div class="line"></div><div class="line">### 2.4 附上测试代码</div><div class="line"></div><div class="line">`<span class="string">``</span>html</div><div class="line">&lt;!DOCTYPE html&gt;</div><div class="line"><span class="xml"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Canvas Test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css"></span></div><div class="line">    <span class="selector-tag">body</span> &#123;</div><div class="line">      <span class="attribute">text-align</span>: center;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="selector-class">.c1</span> &#123;</div><div class="line">      <span class="attribute">border</span>: <span class="number">1px</span> solid red;</div><div class="line">      <span class="attribute">height</span>: <span class="number">600px</span>;</div><div class="line">      <span class="attribute">width</span>: <span class="number">800px</span>;</div><div class="line">    &#125;</div><div class="line">  <span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">canvas</span> <span class="attr">id</span>=<span class="string">"c1"</span> <span class="attr">onclick</span>=<span class="string">"alert('abc')"</span> <span class="attr">class</span>=<span class="string">"c1"</span>&gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"main.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> c1 = <span class="built_in">document</span>.getElementById(<span class="string">'c1'</span>);</div><div class="line"><span class="comment">// 如果不用id属性，我们可以用如下方式来获取canvas对象</span></div><div class="line"><span class="comment">//var c1 = document.getElementsByTagName('canvas')[0];</span></div><div class="line">c1.width = <span class="number">800</span>;</div><div class="line">c1.height = <span class="number">600</span>;</div><div class="line"><span class="keyword">var</span> context = c1.getContext(<span class="string">'2d'</span>);</div><div class="line"><span class="built_in">console</span>.log(context); <span class="comment">//可以看到context是一个CanvasRenderingContext2D对象</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">getRadian</span>(<span class="params">degrees<span class="regexp">/*角度值*/</span></span>) </span>&#123;</div><div class="line">  <span class="keyword">return</span> (<span class="built_in">Math</span>.PI / <span class="number">180</span>) * degrees;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">//绘制红色矩形</span></div><div class="line">context.fillStyle = <span class="string">'red'</span>;</div><div class="line">context.fillRect(<span class="number">10</span>, <span class="number">10</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line"></div><div class="line"><span class="comment">//绘制蓝色矩形框</span></div><div class="line">context.strokeStyle = <span class="string">'blue'</span>;</div><div class="line">context.strokeRect(<span class="number">150</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line"></div><div class="line"><span class="comment">//清空矩形区域（设置矩形区域为空白）</span></div><div class="line">context.clearRect(<span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>, <span class="number">100</span>);</div><div class="line"></div><div class="line"><span class="comment">//画线，设置起点。</span></div><div class="line">context.moveTo(<span class="number">200</span>, <span class="number">200</span>);</div><div class="line"><span class="comment">//设置轨迹</span></div><div class="line">context.lineTo(<span class="number">500</span>, <span class="number">500</span>);</div><div class="line"><span class="comment">//画线</span></div><div class="line">context.stroke();</div><div class="line"></div><div class="line"><span class="comment">//绘制空心矩形</span></div><div class="line">context.beginPath();</div><div class="line">context.moveTo(<span class="number">400</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">450</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">450</span>, <span class="number">450</span>);</div><div class="line">context.lineTo(<span class="number">400</span>, <span class="number">450</span>);</div><div class="line">context.closePath();</div><div class="line">context.stroke();</div><div class="line"></div><div class="line"><span class="comment">//绘制实心梯形</span></div><div class="line">context.beginPath();</div><div class="line">context.moveTo(<span class="number">100</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">200</span>, <span class="number">400</span>);</div><div class="line">context.lineTo(<span class="number">250</span>, <span class="number">500</span>);</div><div class="line">context.lineTo(<span class="number">50</span>, <span class="number">500</span>);</div><div class="line">context.fill();</div><div class="line"></div><div class="line"><span class="comment">//绘制圆弧</span></div><div class="line">context.beginPath();</div><div class="line">context.arc(<span class="number">550</span>, <span class="number">150</span>, <span class="number">100</span>, getRadian(<span class="number">90</span>), getRadian(<span class="number">360</span>), <span class="literal">true</span>);</div><div class="line">context.stroke();</div><div class="line">context.beginPath();</div><div class="line">context.arc(<span class="number">550</span>, <span class="number">150</span>, <span class="number">100</span>, <span class="number">0</span>, getRadian(<span class="number">90</span>), <span class="literal">true</span>);</div><div class="line">context.stroke();</div><div class="line"></div><div class="line"><span class="comment">//绘制圆弧（必须要设定起始点）</span></div><div class="line">context.beginPath();</div><div class="line">context.fillRect(<span class="number">600</span>, <span class="number">400</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">context.fillRect(<span class="number">700</span>, <span class="number">500</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line">context.fillStyle = <span class="string">'blue'</span>;</div><div class="line">context.fillRect(<span class="number">700</span>, <span class="number">400</span>, <span class="number">10</span>, <span class="number">10</span>);</div><div class="line"></div><div class="line">context.beginPath();</div><div class="line">context.moveTo(<span class="number">700</span>, <span class="number">400</span>);</div><div class="line">context.arcTo(<span class="number">600</span>, <span class="number">600</span>, <span class="number">700</span>, <span class="number">700</span>, <span class="number">500</span>);</div><div class="line">context.stroke();</div><div class="line"></div><div class="line"><span class="comment">//绘制矩形线条</span></div><div class="line">context.beginPath();</div><div class="line">context.rect(<span class="number">700</span>, <span class="number">10</span>, <span class="number">50</span>, <span class="number">50</span>);</div><div class="line">context.stroke();</div><div class="line">context.fillStyle = <span class="string">'red'</span>;</div><div class="line">context.fill();</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">drawHeart</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  context.fillStyle = <span class="string">'purple'</span>;</div><div class="line">  <span class="comment">//三次曲线</span></div><div class="line">  context.beginPath();</div><div class="line">  context.moveTo(<span class="number">75</span>, <span class="number">40</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">75</span>, <span class="number">37</span>, <span class="number">70</span>, <span class="number">25</span>, <span class="number">50</span>, <span class="number">25</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">20</span>, <span class="number">25</span>, <span class="number">20</span>, <span class="number">62.5</span>, <span class="number">20</span>, <span class="number">62.5</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">20</span>, <span class="number">80</span>, <span class="number">40</span>, <span class="number">102</span>, <span class="number">75</span>, <span class="number">120</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">110</span>, <span class="number">102</span>, <span class="number">130</span>, <span class="number">80</span>, <span class="number">130</span>, <span class="number">62.5</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">130</span>, <span class="number">62.5</span>, <span class="number">130</span>, <span class="number">25</span>, <span class="number">100</span>, <span class="number">25</span>);</div><div class="line">  context.bezierCurveTo(<span class="number">85</span>, <span class="number">25</span>, <span class="number">75</span>, <span class="number">37</span>, <span class="number">75</span>, <span class="number">40</span>);</div><div class="line">  context.fill();</div><div class="line">&#125;</div><div class="line">drawHeart();</div></pre></td></tr></table></figure><hr><section class="comment"><div class="ds-thread" data-thread-key="/blog/2017/02/21/Canvas学习札记/01_初识Canvas，绘制简单图形/" data-title="01_初识Canvas，绘制简单图形" data-url="http://hstarorg.github.io/blog/blog/2017/02/21/Canvas学习札记/01_初识Canvas，绘制简单图形/"></div></section><script>var _shortName = "6389370154370729000";</script><script>var duoshuoQuery = {};
duoshuoQuery["short_name"] = _shortName;
(function() {
    var ds = document.createElement("script");
    ds.type = "text/javascript";
    ds.async = true;
    ds.src = (document.location.protocol === "https:" ? "https:" : "http:") + "//static.duoshuo.com/embed.js";
    ds.charset = "utf-8";
    (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0]).appendChild(ds);
})();</script><footer><section class="copyright">&copy; 2016 - 2017<a href="/blog/">Jay.M.Hu</a></section><section class="intro">由<a href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/blog/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        $(this).parent().css("text-align", "center");
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>