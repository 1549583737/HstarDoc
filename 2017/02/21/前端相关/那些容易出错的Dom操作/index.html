<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="Jay.M.Hu"><meta name="description" itemprop="description" content="0、导言在用惯了 jQuery 这种利器之后，回到原生JS的Dom操作，一时间反而感觉有点陌生。
最近在做的项目中，为了尽可能少的引用三方库，所有DOM操作都是用的原生JS来实现的。在这里也分享下在DOM操作中，容易混淆的一些知识点。
原生JS可能会有兼容性问题，以下方法如非特别说明，均在 Chro"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>那些容易出错的Dom操作 · Love life, love coding~</title><link rel="stylesheet" type="text/css" href="/blog/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/blog/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"></head><body><header><a href="/blog/"><img class="logo" src="https://avatars1.githubusercontent.com/u/4043284?v=3&amp;s=460" alt="幻☆精灵的Blog" title="幻☆精灵的Blog"></a><h1><a href="/blog/" alt="幻☆精灵的Blog" title="幻☆精灵的Blog">幻☆精灵的Blog</a></h1><p>Love life, love coding~</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="links" alt="链接" title="链接">链接</a></li><li><a href="about" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://github.com/hstarorg" style="position: relative; top: -2px;">&#xe735;</a><a target="_blank" href="https://twitter.com/Hstar19">&#xe71f;</a><a target="_blank" href="https://www.facebook.com/100015363883648">&#xe60b;</a><a target="_blank" href="https://www.zhihu.com/people/hstar">&#xe63f;</a><a target="_blank" href="https://weibo.com/hstarorg" style="position: relative; top: -2px;">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>那些容易出错的Dom操作</h1><span class="post-meta">写于<time> 2017 年 02 月 21 日 14 时 47 分</time><br>更新于<time> 2017 年 02 月 21 日 14 时 47 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#0、导言"><span class="toc-number">1.</span> <span class="toc-text">0、导言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1、获取视口高度"><span class="toc-number">2.</span> <span class="toc-text">1、获取视口高度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2、获取iframe内容高度"><span class="toc-number">3.</span> <span class="toc-text">2、获取iframe内容高度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3、URL编码"><span class="toc-number">4.</span> <span class="toc-text">3、URL编码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4、新Tab打开链接实现"><span class="toc-number">5.</span> <span class="toc-text">4、新Tab打开链接实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5、设置iframe内容"><span class="toc-number">6.</span> <span class="toc-text">5、设置iframe内容</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6、获取滚动高度"><span class="toc-number">7.</span> <span class="toc-text">6、获取滚动高度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7、获取屏幕大小"><span class="toc-number">8.</span> <span class="toc-text">7、获取屏幕大小</span></a></li></ol></div><h2 id="0、导言"><a href="#0、导言" class="headerlink" title="0、导言"></a>0、导言</h2><p>在用惯了 <code>jQuery</code> 这种利器之后，回到原生JS的Dom操作，一时间反而感觉有点陌生。</p>
<p>最近在做的项目中，为了尽可能少的引用三方库，所有DOM操作都是用的原生JS来实现的。在这里也分享下在DOM操作中，容易混淆的一些知识点。</p>
<p>原生JS可能会有兼容性问题，以下方法如非特别说明，均在 <code>Chrome latest(53), Firefox latest(47), Edge25, IE11</code> 中测试通过</p>
<h2 id="1、获取视口高度"><a href="#1、获取视口高度" class="headerlink" title="1、获取视口高度"></a>1、获取视口高度</h2><p>所谓视口高度，就是在浏览器中，我们可见区域的高度，它不会随着内容的变化而变化，只会跟着浏览器本身的大小变化而变化（工具栏高度也会影响浏览区域的大小）。</p>
<p>先来一段完整的测试代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'window.innerWidth:'</span>, <span class="built_in">window</span>.innerWidth, <span class="string">', window.innerHeight:'</span>, <span class="built_in">window</span>.innerHeight);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'document.documentElement.clientWidth:'</span>, <span class="built_in">document</span>.documentElement.clientWidth, <span class="string">', document.documentElement.clientHeight:'</span>, <span class="built_in">document</span>.documentElement.clientHeight);</div><div class="line">  <span class="built_in">console</span>.log(<span class="string">'document.body.clientWidth:'</span>, <span class="built_in">document</span>.body.clientWidth, <span class="string">', document.body.clientHeight:'</span>, <span class="built_in">document</span>.body.clientHeight);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>打开不同的页面（是否有滚动条，页面内容大于视口高度），分析得知：</p>
<p><code>window.innerWidth</code> 和 <code>window.innerHeight</code> 是获取浏览器视口的宽高，包含滚动条。</p>
<p><code>document.documentElement.clientWidth</code> 和 <code>document.documentElement.clientHeight</code> 是获取浏览器视口的宽高，但不包含滚动条。</p>
<p><code>document.body.clientWidth</code> 和 <code>document.body.clientHeight</code> 是获取页面的宽高，不包含滚动条</p>
<p><strong>通过也根据结果得出：IE、FF、Chrome的滚动条宽度/高度为 <code>17px</code>， Edge25中滚动条宽度/高度为 <code>12px</code>。</strong></p>
<p>除此之外，还可以通过 <code>window.outerWidth</code> 和 <code>window.outerHeight</code> 获取浏览器的宽高，包含工具栏，标题栏等的宽高。</p>
<p><strong>结论：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> viewHeight = <span class="built_in">window</span>.innerHeight || <span class="built_in">document</span>.documentElement.clientHeight;</div><div class="line"><span class="keyword">let</span> viewWidth = <span class="built_in">window</span>.innerWidth || <span class="built_in">document</span>.documentElement.clientWidth;</div></pre></td></tr></table></figure>
<h2 id="2、获取iframe内容高度"><a href="#2、获取iframe内容高度" class="headerlink" title="2、获取iframe内容高度"></a>2、获取iframe内容高度</h2><p><code>iframe</code> 本身等价于一个独立的窗口, 所以要获取iframe内容的高度和获取页面内容高度一致。</p>
<p>在获取视口宽度时，我们知道，通过 <code>document.body.clientHeight</code> 可以获取 <code>body</code> 的高度，那么还有其他的方式可以获取么？</p>
<p>还是先上一个测试代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> timerId;</div><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'resize'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">window</span>.clearTimeout(timerId);</div><div class="line">  timerId = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.documentElement.clientHeight:'</span>, <span class="built_in">document</span>.documentElement.clientHeight);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.documentElement.offsetHeight:'</span>, <span class="built_in">document</span>.documentElement.offsetHeight);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.documentElement.scrollHeight:'</span>, <span class="built_in">document</span>.documentElement.scrollHeight);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.body.clientHeight:'</span>, <span class="built_in">document</span>.body.clientHeight);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.body.offsetHeight:'</span>, <span class="built_in">document</span>.body.offsetHeight);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.body.scrollHeight:'</span>, <span class="built_in">document</span>.body.scrollHeight);</div><div class="line">  &#125;, <span class="number">200</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>这个测试的结果如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Chrome</span></div><div class="line">documentElement.offsetHeight = documentElement.scrollHeight = body.scrollHeight</div><div class="line">body.offsetHeight = body.clientHeight</div><div class="line">documentElement.offsetHeight &gt; body.offsetHeight (大<span class="number">24</span>px)</div><div class="line"></div><div class="line"><span class="comment">// Firefox</span></div><div class="line">documentElement.offsetHeight = documentElement.scrollHeight</div><div class="line">body.scrollHeight = body.offsetHeight = body.clientHeight</div><div class="line">documentElement.offsetHeight &gt; body.offsetHeight (大<span class="number">24</span>px)</div><div class="line"></div><div class="line"><span class="comment">// Edge25</span></div><div class="line">documentElement.offsetHeight = body.scrollHeight &gt; documentElement.scrollHeight (大<span class="number">1</span>px)</div><div class="line">body.clientHeight = body.offsetHeight</div><div class="line">documentElement.offsetHeight &gt; body.clientHeight (大<span class="number">24</span>px)</div><div class="line"></div><div class="line"><span class="comment">// IE11</span></div><div class="line">documentElement.offsetHeight = documentElement.scrollHeight</div><div class="line">body.scrollHeight = body.offsetHeight = body.clientHeight</div><div class="line">documentElement.offsetHeight &gt; body.offsetHeight (大<span class="number">24</span>px)</div></pre></td></tr></table></figure>
<p>根据以上结果，暂时还无法得出结论，所以我们接着测试：</p>
<p><strong>测试一：设置body的margin:0</strong></p>
<p>以上四个都有大24px，先来分析下这个是怎么来的。</p>
<p>初步分析是由于 <code>body</code> 默认的 <code>margin: 8px</code> 导致的，当设置body的 <code>margin: 0</code> 之后，这个差距变成了 <code>16px</code>。</p>
<p><strong>Edge25比较特殊，相关数据变成了：</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">documentElement.offsetHeight = documentElement.scrollHeight &lt; body.scrollHeight （小<span class="number">1</span>px）</div><div class="line">body.clientHeight = body.offsetHeight</div><div class="line">documentElement.offsetHeight &gt; body.clientHeight (大<span class="number">16</span>px)</div></pre></td></tr></table></figure>
<p><strong>测试二：给body设置固定高度</strong></p>
<p>此时，我们给body设定一个固定高度，得出以下结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">documentElement.offsetHeight = body.clientHeight = body.offsetHeight = 我们设定的高度</div></pre></td></tr></table></figure>
<p><strong>测试三：增加超高的 absolute 元素</strong></p>
<p>当absolute元素高度不超过整个页面高度时，无影响。</p>
<p>当absolute元素高度超过整个页面高度时，结果如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Chrome</span></div><div class="line">body.scrollHeight = 设定的absolute元素高度</div><div class="line"></div><div class="line"><span class="comment">// Firefox, IE11</span></div><div class="line">documentElement.scrollHeight = 设定的absolute元素高度</div><div class="line"></div><div class="line"><span class="comment">// Edge25</span></div><div class="line">documentElement.scrollHeight = body.scrollHeight = 设定的absolute元素高度</div></pre></td></tr></table></figure>
<p>综合以上测试，在这里得出一个获取页面高度的代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="keyword">let</span> pageHeight = <span class="built_in">Math</span>.max(documentElement.scrollHeight, body.scrollHeight);</div></pre></td></tr></table></figure>
<p><strong>注意，以上方案并不具有通用性，还需根据自己的场景来灵活选择。</strong></p>
<h2 id="3、URL编码"><a href="#3、URL编码" class="headerlink" title="3、URL编码"></a>3、URL编码</h2><p>我们在浏览器中进行URL编码一般有两个方法，<code>encodeURI</code> 和 <code>encodeURIComponent</code>，那它们之间有啥区别呢？</p>
<p>不多说，先来段代码就知道了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> str = <span class="string">'_- key fda'</span>;</div><div class="line"></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURI</span>(str)); <span class="comment">//_-%20key%20fda</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURIComponent</span>(str)); <span class="comment">//_-%20key%20fda</span></div><div class="line"></div><div class="line">str = <span class="string">'https://www.google.com/search?q=Path+must+be+a+string.+Received+null&amp;oq=Path'</span>;</div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURI</span>(str)); <span class="comment">//https://www.google.com/search?q=Path+must+be+a+string.+Received+null&amp;oq=Path</span></div><div class="line"><span class="built_in">console</span>.log(<span class="built_in">encodeURIComponent</span>(str)); <span class="comment">//https%3A%2F%2Fwww.google.com%2Fsearch%3Fq%3DPath%2Bmust%2Bbe%2Ba%2Bstring.%2BReceived%2Bnull%26oq%3DPath</span></div></pre></td></tr></table></figure>
<p>由此可以看出，当str是简单的非url字符串时，两者并没有差异。但当我们要对一个完整的URL进行编码的时候，就需要使用 <code>encodeURIComponent</code> 。</p>
<h2 id="4、新Tab打开链接实现"><a href="#4、新Tab打开链接实现" class="headerlink" title="4、新Tab打开链接实现"></a>4、新Tab打开链接实现</h2><p>一般做法是模拟一个 <code>a</code> 标签，然后打开，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> a = <span class="built_in">document</span>.createElement(<span class="string">'a'</span>);</div><div class="line">a.setAttribute(<span class="string">'href'</span>, url);</div><div class="line">a.setAttribute(<span class="string">'target'</span>, <span class="string">'_blank'</span>);</div><div class="line"><span class="comment">// 以下两行为兼容IE9而实现，IE9要求必须在body中的a才可以跳转</span></div><div class="line">a.style.display = <span class="string">'none'</span>;</div><div class="line"><span class="built_in">document</span>.body.appendChild(a);</div><div class="line"></div><div class="line">a.click();</div><div class="line"><span class="built_in">document</span>.body.removeChild(a);</div></pre></td></tr></table></figure>
<h2 id="5、设置iframe内容"><a href="#5、设置iframe内容" class="headerlink" title="5、设置iframe内容"></a>5、设置iframe内容</h2><p>如果设置局部内容，直接获取 <code>contentDocument</code> 就可以做到，那如果要填充一个完整的HTML文档，该如何做呢？</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 找到document</span></div><div class="line"><span class="keyword">let</span> fd = <span class="built_in">document</span>.getElementById(<span class="string">'previewFrame'</span>).contentDocument;</div><div class="line">fd.open(); <span class="comment">// 打开输入流</span></div><div class="line">fd.write(<span class="string">''</span>);</div><div class="line">fd.write(fullHtml); <span class="comment">// 写入完整的HTML内容</span></div><div class="line">fd.close(); <span class="comment">// 关闭输入流</span></div></pre></td></tr></table></figure>
<h2 id="6、获取滚动高度"><a href="#6、获取滚动高度" class="headerlink" title="6、获取滚动高度"></a>6、获取滚动高度</h2><p>老规矩，先来段测试代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> timerId;</div><div class="line"><span class="built_in">window</span>.addEventListener(<span class="string">'scroll'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">  <span class="built_in">window</span>.clearTimeout(timerId);</div><div class="line">  timerId = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.documentElement.scrollTop:'</span>, <span class="built_in">document</span>.documentElement.scrollTop);</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'document.body.scrollTop:'</span>, <span class="built_in">document</span>.body.scrollTop);</div><div class="line">  &#125;, <span class="number">200</span>);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>通过在浏览器中测试，得到以下结果：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Chrome and Edge</span></div><div class="line">documentElement.scrollTop 始终等于 <span class="number">0</span></div><div class="line"><span class="built_in">document</span>.body.scrollTop 是真实的滚动高度</div><div class="line"></div><div class="line"><span class="comment">// Firefox and IE11</span></div><div class="line">documentElement.scrollTop 是真实的滚动高度</div><div class="line"><span class="built_in">document</span>.body.scrollTop 始终为<span class="number">0</span></div></pre></td></tr></table></figure>
<p>因此当我们要计算滚动高度的时候，可以采用如下代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</div></pre></td></tr></table></figure>
<h2 id="7、获取屏幕大小"><a href="#7、获取屏幕大小" class="headerlink" title="7、获取屏幕大小"></a>7、获取屏幕大小</h2><p>这个就比较简单了，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 屏幕宽度</span></div><div class="line">screen.width</div><div class="line"></div><div class="line"><span class="comment">// 屏幕高度 </span></div><div class="line">screen.height</div></pre></td></tr></table></figure><hr><section class="comment"><div class="ds-thread" data-thread-key="/blog/2017/02/21/前端相关/那些容易出错的Dom操作/" data-title="那些容易出错的Dom操作" data-url="http://hstarorg.github.io/blog/blog/2017/02/21/前端相关/那些容易出错的Dom操作/"></div></section><script>var _shortName = "6389370154370729000";</script><script>var duoshuoQuery = {};
duoshuoQuery["short_name"] = _shortName;
(function() {
    var ds = document.createElement("script");
    ds.type = "text/javascript";
    ds.async = true;
    ds.src = (document.location.protocol === "https:" ? "https:" : "http:") + "//static.duoshuo.com/embed.js";
    ds.charset = "utf-8";
    (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0]).appendChild(ds);
})();</script><footer><section class="copyright">&copy; 2016 - 2017<a href="/blog/">Jay.M.Hu</a></section><section class="intro">由<a href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/blog/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        $(this).parent().css("text-align", "center");
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>