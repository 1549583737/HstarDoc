<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="Jay.M.Hu"><meta name="description" itemprop="description" content="0、关于Vue组件组件是 Vue 中最强大的功能之一，Vue组件也和angular的组件比较类似，可以扩展HTML元素。在较高层面上，也是自定义元素。
在原生HTML元素上附加功能，Vue 的做法是通过 is 特性扩展， ng2 中则称之为属性指令。
1、定义组件在 Vue 中定义组件是一个很轻松的"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>02_Vue组件（上） · Love life, love coding~</title><link rel="stylesheet" type="text/css" href="/blog/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/blog/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"></head><body><header><a href="/blog/"><img class="logo" src="https://avatars1.githubusercontent.com/u/4043284?v=3&amp;s=460" alt="幻☆精灵的Blog" title="幻☆精灵的Blog"></a><h1><a href="/blog/" alt="幻☆精灵的Blog" title="幻☆精灵的Blog">幻☆精灵的Blog</a></h1><p>Love life, love coding~</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="links" alt="链接" title="链接">链接</a></li><li><a href="about" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://github.com/hstarorg" style="position: relative; top: -2px;">&#xe735;</a><a target="_blank" href="https://twitter.com/Hstar19">&#xe71f;</a><a target="_blank" href="https://www.facebook.com/100015363883648">&#xe60b;</a><a target="_blank" href="https://www.zhihu.com/people/hstar">&#xe63f;</a><a target="_blank" href="https://weibo.com/hstarorg" style="position: relative; top: -2px;">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>02_Vue组件（上）</h1><span class="post-meta">写于<time> 2017 年 02 月 21 日 14 时 47 分</time><br>更新于<time> 2017 年 02 月 21 日 14 时 47 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#0、关于Vue组件"><span class="toc-number">1.</span> <span class="toc-text">0、关于Vue组件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1、定义组件"><span class="toc-number">2.</span> <span class="toc-text">1、定义组件</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#组件选项"><span class="toc-number">2.1.</span> <span class="toc-text">组件选项</span></a></li></ol></li></ol></div><h1 id="0、关于Vue组件"><a href="#0、关于Vue组件" class="headerlink" title="0、关于Vue组件"></a>0、关于Vue组件</h1><p>组件是 <code>Vue</code> 中最强大的功能之一，Vue组件也和angular的组件比较类似，可以扩展HTML元素。在较高层面上，也是自定义元素。</p>
<p>在原生HTML元素上附加功能，<code>Vue</code> 的做法是通过 <code>is</code> 特性扩展， <code>ng2</code> 中则称之为属性指令。</p>
<h1 id="1、定义组件"><a href="#1、定义组件" class="headerlink" title="1、定义组件"></a>1、定义组件</h1><p>在 <code>Vue</code> 中定义组件是一个很轻松的方式，代码如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 定义组件构造器</span></div><div class="line"><span class="keyword">var</span> Component1 = Vue.extend(&#123;</div><div class="line"></div><div class="line">&#125;);</div><div class="line"></div><div class="line"><span class="comment">// 全局注册组件</span></div><div class="line">Vue.component(<span class="string">'component-1'</span>, Component1);</div><div class="line"></div><div class="line"><span class="comment">// 也可局部注册组件</span></div><div class="line"><span class="comment">// 局部注册意味着该组件仅能在包含它的组件中运行，如示例的Parent组件</span></div><div class="line"><span class="keyword">var</span> Parent = Vue.extend(&#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">''</span>,</div><div class="line">  <span class="attr">components</span>: &#123;</div><div class="line">    <span class="string">'component-1'</span>: Component1</div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>为了足够简单，<code>Vue</code> 还提供了一个语法糖写法如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 直接注册组件（不在需要组件构造器）</span></div><div class="line">Vue.component(<span class="string">'component1'</span>, &#123;</div><div class="line"></div><div class="line">&#125;);</div><div class="line"><span class="comment">// 局部注册同理</span></div><div class="line"><span class="keyword">var</span> Parent = Vue.extend(&#123;</div><div class="line">  <span class="attr">template</span>: <span class="string">''</span>,</div><div class="line">  <span class="attr">components</span>: &#123;</div><div class="line">    <span class="string">'component-1'</span>: &#123;</div><div class="line"></div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">&#125;)</div></pre></td></tr></table></figure>
<p>该语法实际上是 <code>Vue</code> 在背后自动调用 <code>Vue.extend()</code>。</p>
<p>除此之外，如果使用 <code>.vue</code> 格式的组件，我们定义组件的方式如下：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;script&gt;</div><div class="line">  <span class="comment">// 定义一个组件</span></div><div class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line"></div><div class="line">  &#125;;</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<h2 id="组件选项"><a href="#组件选项" class="headerlink" title="组件选项"></a>组件选项</h2><p>所谓组件选项，就是在定义组件时，传递给 <code>Vue.extend()</code> 的参数。</p>
<p>定义组件是相当简单的事情，我们更多的需要去关注组件选项！</p>
<p>先来一个完整的组件选项压压惊：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Component1 = Vue.extend(&#123;</div><div class="line">  <span class="attr">data</span>: &#123;&#125; or fn <span class="comment">// 数据对象</span></div><div class="line">  props: [] or &#123;&#125; <span class="comment">// 组件可配置的属性</span></div><div class="line">  propsData: &#123;&#125; <span class="comment">// 在创建实例时，给属性赋值（用于测试）</span></div><div class="line">  computed: &#123;&#125; <span class="comment">// 实例计算属性</span></div><div class="line">  methods: &#123;&#125; <span class="comment">// 实例方法</span></div><div class="line">  watch: &#123;&#125; <span class="comment">// 监控属性</span></div><div class="line"></div><div class="line">  el: string or HtmlElement or fn <span class="comment">//挂载元素，将组件实例挂载到那儿</span></div><div class="line">  template: string <span class="comment">// 组件模板</span></div><div class="line">  replace: boolean <span class="comment">// 是否替换挂载元素，和template一起使用，默认true</span></div><div class="line"></div><div class="line">  init: fn <span class="comment">// 生命周期钩子，初始化时调用，此时数据观察、事件和watcher都没初始化</span></div><div class="line">  created: fn <span class="comment">// 组件参数已经解析完毕，但还未开始DOM编译</span></div><div class="line">  beforeCompile: fn <span class="comment">//开始编译DOM</span></div><div class="line">  compiled: fn <span class="comment">// DOM编译完成，数据辩护已经可以触发DOM更新了，但不保证$el已经插入文档</span></div><div class="line">  ready: fn <span class="comment">// 编译结束和 $el 第一次插入文档之后调用</span></div><div class="line">  attached: fn <span class="comment">// 在$el插入DOM时调用 </span></div><div class="line">  detached: fn <span class="comment">// 在$el从DOM元素中删除时调用</span></div><div class="line">  beforeDestroy: fn <span class="comment">// 在开始销毁实例时调用</span></div><div class="line">  destroyed: fn <span class="comment">// 实例销毁后调用，如果有离开过渡，将会在过渡完成之后调用</span></div><div class="line"></div><div class="line">  directives: &#123;&#125; <span class="comment">// 组件局部注册的指令</span></div><div class="line">  elementDirectives: &#123;&#125; <span class="comment">// 组件局部注册的元素指令</span></div><div class="line">  filters: &#123;&#125; <span class="comment">// 组件局部注册的过滤器</span></div><div class="line">  components: &#123;&#125; <span class="comment">// 组件局部注册的子组件</span></div><div class="line">  transitions: &#123;&#125; <span class="comment">// 组件局部注册的动画</span></div><div class="line">  partials: &#123;&#125; <span class="comment">// 组件局部注册的分部元素</span></div><div class="line"></div><div class="line">  parent: Vue实例 <span class="comment">// 指定实例的父实例</span></div><div class="line">  events: &#123;&#125; <span class="comment">// 事件监听列表对象</span></div><div class="line">  mixins: [] <span class="comment">// 组件的混合器</span></div><div class="line">  name: string <span class="comment">//组件的名称，允许在自己的模板中调用自己（递归组件非常有效）</span></div><div class="line">  extends: &#123;&#125; or fn <span class="comment">// 声明式的扩展组件</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>虽然全量的属性比较多，但实际上常用的并不很太多，下面我列一下我比较常用的属性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Component1 = Vue.extend(&#123;</div><div class="line">  <span class="attr">name</span>: <span class="string">'component-1'</span>,</div><div class="line">  <span class="attr">data</span>: &#123;</div><div class="line">    <span class="attr">firstName</span>: <span class="string">'Hu'</span>,</div><div class="line">    <span class="attr">lastName</span>: <span class="string">'Jay'</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">props</span>: [<span class="string">'height'</span>, <span class="string">'width'</span>],</div><div class="line">  <span class="attr">template</span>: <span class="string">'&lt;h1&gt;&#123;&#123;fullName&#125;&#125;&lt;/h1&gt;'</span>,</div><div class="line">  <span class="attr">replace</span>: <span class="literal">true</span>,</div><div class="line">  </div><div class="line">  <span class="attr">filters</span>: &#123;&#125;,</div><div class="line">  <span class="attr">components</span>: &#123;&#125;,</div><div class="line">  <span class="attr">transitions</span>: &#123;&#125;,</div><div class="line"></div><div class="line">  <span class="attr">methods</span>: &#123;</div><div class="line">    <span class="attr">doSomething</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      alert(<span class="keyword">this</span>.fullName);</div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">events</span>: &#123;</div><div class="line">    <span class="string">'do'</span>: <span class="string">'doSomething'</span>, <span class="comment">//方法名字</span></div><div class="line">    <span class="string">'do1'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="comment">//当捕获 do1 事件时执行</span></div><div class="line">    &#125;</div><div class="line">  &#125;,</div><div class="line">  <span class="attr">watch</span>:&#123;&#125;,</div><div class="line">  <span class="attr">computed</span>: &#123;</div><div class="line">    <span class="attr">fullName</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line">      <span class="keyword">return</span> <span class="keyword">this</span>.firstName + <span class="keyword">this</span>.lastName;</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  created: funciton()&#123;</div><div class="line">    <span class="comment">// 初始化操作</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">ready</span>: funciton()&#123;</div><div class="line">    <span class="comment">// 如果有DOM操作，那么放在这里</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">beforeDestroy</span>: funciton()&#123;</div><div class="line">    <span class="comment">// 如果某些东西需要手动释放，那么放在这里</span></div><div class="line">  &#125;</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<p>如果是在 <code>.vue</code> 格式中，我们的用法稍微有点变化，主要是使用ES6的新特性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">&lt;style&gt;</div><div class="line">  <span class="xml"><span class="comment">&lt;!-- 放置样式 --&gt;</span></span></div><div class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></div><div class="line">&lt;template&gt;</div><div class="line">  <span class="xml"><span class="comment">&lt;!-- 此处放置模板，建议都用一个根元素包裹起来 --&gt;</span></span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app-component-1"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>我是模板内容<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line">&lt;script&gt;</div><div class="line">  <span class="comment">//放置组件代码</span></div><div class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</div><div class="line">    <span class="attr">props</span>: [],</div><div class="line">    data() &#123; </div><div class="line">      <span class="keyword">return</span> &#123;&#125;;</div><div class="line">    &#125;,</div><div class="line">    created() &#123;</div><div class="line"></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">methods</span>: &#123;</div><div class="line">      fun1() &#123;</div><div class="line"></div><div class="line">      &#125;,</div><div class="line">      fun2() &#123;</div><div class="line"></div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">events</span>: &#123;</div><div class="line">      <span class="string">'do'</span>: <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</div><div class="line"></div><div class="line">      &#125;</div><div class="line">    &#125;,</div><div class="line">    <span class="attr">watch</span>: &#123;</div><div class="line">      firstName(newVal, oldVal)&#123;</div><div class="line"></div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line">  &#125;;</div><div class="line"><span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></div></pre></td></tr></table></figure>
<p><strong>注意：为什么data在.vue中data是一个方法呢？因为.vue下是使用的ES6的特性，如果是属性的话，就是原型属性，当多个组件时，就会共享同一份原型，导致数据错乱，所以通过function返回一个对象，保证每个组件实例隔离。</strong></p>
<hr><section class="comment"><div class="ds-thread" data-thread-key="/blog/2017/02/21/Vue实践之路/02_Vue组件（上）/" data-title="02_Vue组件（上）" data-url="http://hstarorg.github.io/blog/blog/2017/02/21/Vue实践之路/02_Vue组件（上）/"></div></section><script>var _shortName = "6389370154370729000";</script><script>var duoshuoQuery = {};
duoshuoQuery["short_name"] = _shortName;
(function() {
    var ds = document.createElement("script");
    ds.type = "text/javascript";
    ds.async = true;
    ds.src = (document.location.protocol === "https:" ? "https:" : "http:") + "//static.duoshuo.com/embed.js";
    ds.charset = "utf-8";
    (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0]).appendChild(ds);
})();</script><footer><section class="copyright">&copy; 2016 - 2017<a href="/blog/">Jay.M.Hu</a></section><section class="intro">由<a href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/blog/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        $(this).parent().css("text-align", "center");
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>