<!DOCTYPE html><html class="han-init" lang="zh-Hant"><head><meta name="author" content="Jay.M.Hu"><meta name="description" itemprop="description" content="相关：最佳实践，反模式1、为什么会觉得jQuery插件缺失？请记住：当你在使用jQuery插件时，请在AngularJS之前加载jQuery库
分析： 因为AngularJS自带jqLite（可以理解为jQuery的精简版），如果先引入AngularJS的话，那么AngularJS会采用jqLite"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>AngularJS官方FAQ · Love life, love coding~</title><link rel="stylesheet" type="text/css" href="/blog/font/fantasque_sans_mono/stylesheet.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/webicons/2.0.0/webicons.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/Han/3.3.0/han.min.css"><link rel="stylesheet" type="text/css" href="/blog/styles/screen.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/highlight.js/9.9.0/styles/gruvbox-dark.min.css"></head><body><header><a href="/blog/"><img class="logo" src="https://avatars1.githubusercontent.com/u/4043284?v=3&amp;s=460" alt="幻☆精灵的Blog" title="幻☆精灵的Blog"></a><h1><a href="/blog/" alt="幻☆精灵的Blog" title="幻☆精灵的Blog">幻☆精灵的Blog</a></h1><p>Love life, love coding~</p><nav><ul><li><a href="/" alt="首页" title="首页">首页</a></li><li><a href="pigeonhole" alt="归档" title="归档">归档</a></li><li><a href="links" alt="链接" title="链接">链接</a></li><li><a href="about" alt="关于" title="关于">关于</a></li></ul><div class="xnews-icon"><a target="_blank" href="https://github.com/hstarorg" style="position: relative; top: -2px;">&#xe735;</a><a target="_blank" href="https://twitter.com/Hstar19">&#xe71f;</a><a target="_blank" href="https://www.facebook.com/100015363883648">&#xe60b;</a><a target="_blank" href="https://www.zhihu.com/people/hstar">&#xe63f;</a><a target="_blank" href="https://weibo.com/hstarorg" style="position: relative; top: -2px;">&#xe603;</a></div></nav><div class="space"></div></header><main><article class="full"><h1>AngularJS官方FAQ</h1><span class="post-meta">写于<time> 2015 年 03 月 13 日 11 时 24 分</time><br>更新于<time> 2017 年 02 月 21 日 14 时 15 分</time></span><div class="article-toc"><strong>大纲</strong><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#相关：最佳实践，反模式"><span class="toc-number">1.</span> <span class="toc-text">相关：最佳实践，反模式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、为什么会觉得jQuery插件缺失？"><span class="toc-number">1.1.</span> <span class="toc-text">1、为什么会觉得jQuery插件缺失？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、如何从一个Controller中访问DOM元素？"><span class="toc-number">1.2.</span> <span class="toc-text">2、如何从一个Controller中访问DOM元素？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3、为什么Angular说-controller-directive等缺失？"><span class="toc-number">1.3.</span> <span class="toc-text">3、为什么Angular说 controller/directive等缺失？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4、如何渲染未转义的数据？"><span class="toc-number">1.4.</span> <span class="toc-text">4、如何渲染未转义的数据？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5、当array-object-resource-result变化时，应该如何监视？"><span class="toc-number">1.5.</span> <span class="toc-text">5、当array/object/$resource-result变化时，应该如何监视？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6、怎样才能序列化表单数据提交？"><span class="toc-number">1.6.</span> <span class="toc-text">6、怎样才能序列化表单数据提交？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7、总是在-ng-models-上使用-gt-最佳实践"><span class="toc-number">1.7.</span> <span class="toc-text">7、总是在 ng-models 上使用(.) =>最佳实践</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8、应该如何从-service-中访问-scope-？"><span class="toc-number">1.8.</span> <span class="toc-text">8、应该如何从 service 中访问 scope ？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#9、module-factory-和-module-service-不同点是什么？"><span class="toc-number">1.9.</span> <span class="toc-text">9、module().factory() 和 module().service() 不同点是什么？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#10、如何防止无样式的内容闪现（页面显示双大括号绑定表达式）？"><span class="toc-number">1.10.</span> <span class="toc-text">10、如何防止无样式的内容闪现（页面显示双大括号绑定表达式）？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#11、为什么-lt-a-ng-click-quot-go-lt-￼5-gt-quot-gt-不工作？"><span class="toc-number">1.11.</span> <span class="toc-text">11、为什么 <a ng-click="go()"> 不工作？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#12、嵌套-routes-views"><span class="toc-number">1.12.</span> <span class="toc-text">12、嵌套 routes/views?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#13、可以在行内指定模板或者是分部视图吗？"><span class="toc-number">1.13.</span> <span class="toc-text">13、可以在行内指定模板或者是分部视图吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#14、-如何在-ngResource-地址中使用端口？"><span class="toc-number">1.14.</span> <span class="toc-text">14、 如何在 ngResource 地址中使用端口？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#15、为什么插件触发的change事件似乎不工作？"><span class="toc-number">1.15.</span> <span class="toc-text">15、为什么插件触发的change事件似乎不工作？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#16、不要使用jQuery来切换crap-待定：无效元素-，在行内使用一些变量标记。"><span class="toc-number">1.16.</span> <span class="toc-text">16、不要使用jQuery来切换crap(待定：无效元素)，在行内使用一些变量标记。</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#17、如何从DOM检查上查看-scope-？"><span class="toc-number">1.17.</span> <span class="toc-text">17、如何从DOM检查上查看 scope ？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#18、你有一些好的指令示例-库吗？"><span class="toc-number">1.18.</span> <span class="toc-text">18、你有一些好的指令示例/库吗？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#19、IE？"><span class="toc-number">1.19.</span> <span class="toc-text">19、IE？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#20、必须对路由使用"><span class="toc-number">1.20.</span> <span class="toc-text">20、必须对路由使用#?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#21、你应该在尝试用指令包装jQuery插件前，优先尝试使用AngularUI-Passthru-Directive-uiJq"><span class="toc-number">1.21.</span> <span class="toc-text">21、你应该在尝试用指令包装jQuery插件前，优先尝试使用AngularUI Passthru Directive (uiJq) </span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#22、为什么我的-scope-watch-递归触发"><span class="toc-number">1.22.</span> <span class="toc-text">22、为什么我的 $scope.$watch() 递归触发?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#23、何时我需要使用-scope-apply"><span class="toc-number">1.23.</span> <span class="toc-text">23、何时我需要使用 $scope.$apply() ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#24、启用了-html5Mode-，如何获取-lt-a-href-gt-的后退行为？"><span class="toc-number">1.24.</span> <span class="toc-text">24、启用了 html5Mode ，如何获取<a href />的后退行为？</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#25、如何-preventDefualt-或-stopPropagation"><span class="toc-number">1.25.</span> <span class="toc-text">25、如何 .preventDefualt() 或 .stopPropagation() ?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#26、AngularJS在我的Chrome扩展中不工作！"><span class="toc-number">1.26.</span> <span class="toc-text">26、AngularJS在我的Chrome扩展中不工作！</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#27、如何缓存-http-和html-分部视图"><span class="toc-number">1.27.</span> <span class="toc-text">27、如何缓存 $http 和html 分部视图</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#测试"><span class="toc-number">2.</span> <span class="toc-text">测试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1、拒绝-解决一个-q-defer-不通过"><span class="toc-number">2.1.</span> <span class="toc-text">1、拒绝/解决一个 $q.defer() 不通过</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2、Jasmine-spyOn-不执行-spy’d-功能"><span class="toc-number">2.2.</span> <span class="toc-text">2、Jasmine spyOn() 不执行 spy’d 功能</span></a></li></ol></li></ol></div><h2 id="相关：最佳实践，反模式"><a href="#相关：最佳实践，反模式" class="headerlink" title="相关：最佳实践，反模式"></a>相关：最佳实践，反模式</h2><h3 id="1、为什么会觉得jQuery插件缺失？"><a href="#1、为什么会觉得jQuery插件缺失？" class="headerlink" title="1、为什么会觉得jQuery插件缺失？"></a>1、为什么会觉得jQuery插件缺失？</h3><p>请记住：当你在使用jQuery插件时，请在AngularJS之前加载jQuery库</p>
<p><strong>分析：</strong> 因为AngularJS自带jqLite（可以理解为jQuery的精简版），如果先引入AngularJS的话，那么AngularJS会采用jqLite，而不是完整的jQuery库。</p>
<h3 id="2、如何从一个Controller中访问DOM元素？"><a href="#2、如何从一个Controller中访问DOM元素？" class="headerlink" title="2、如何从一个Controller中访问DOM元素？"></a>2、如何从一个Controller中访问DOM元素？</h3><p>不要从Controller中执行DOM的选择/遍历。HTML还没有被渲染。查一查”directive“</p>
<h3 id="3、为什么Angular说-controller-directive等缺失？"><a href="#3、为什么Angular说-controller-directive等缺失？" class="headerlink" title="3、为什么Angular说 controller/directive等缺失？"></a>3、为什么Angular说 controller/directive等缺失？</h3><p>调用 <code>angular.module(&#39;myApp&#39;,[])</code> 总是会创建一个新的模块（同时干掉已有的重名模块）。相反，使用一个参数的方式调用 angular.module(‘myApp’) 来引用已经存在的模块。</p>
<h3 id="4、如何渲染未转义的数据？"><a href="#4、如何渲染未转义的数据？" class="headerlink" title="4、如何渲染未转义的数据？"></a>4、如何渲染未转义的数据？</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$sce.trustAsHtml(data)</div><div class="line">如何禁用$sce?</div><div class="line">app.config([<span class="string">'$sceProvider'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$sceProvider</span>) </span>&#123;</div><div class="line">    $sceProvider.enabled(<span class="literal">false</span>);</div><div class="line">&#125;]);</div></pre></td></tr></table></figure>
<h3 id="5、当array-object-resource-result变化时，应该如何监视？"><a href="#5、当array-object-resource-result变化时，应该如何监视？" class="headerlink" title="5、当array/object/$resource-result变化时，应该如何监视？"></a>5、当array/object/$resource-result变化时，应该如何监视？</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$scope.$watch 有第三个参数设置来监视值变化（非引用变化）</div><div class="line">$watch(watchExpression, listener, [objectEquality]);</div><div class="line">[objectEquality]设置为<span class="literal">true</span>，则使用angular.equals对象相等，而不是使用引用相等比较。</div></pre></td></tr></table></figure>
<h3 id="6、怎样才能序列化表单数据提交？"><a href="#6、怎样才能序列化表单数据提交？" class="headerlink" title="6、怎样才能序列化表单数据提交？"></a>6、怎样才能序列化表单数据提交？</h3><p><strong>不要这么做！</strong> 不要尝试手动收集输入框值。仅仅只需要在每一个表单元素上附加 <code>ng-model=&quot;data.myField</code>，在需要使用的地方，使用 <code>$scope.data</code> 即可</p>
<h3 id="7、总是在-ng-models-上使用-gt-最佳实践"><a href="#7、总是在-ng-models-上使用-gt-最佳实践" class="headerlink" title="7、总是在 ng-models 上使用(.) =&gt;最佳实践"></a>7、总是在 ng-models 上使用(.) =&gt;最佳实践</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">any</span> <span class="attr">ng-model</span>=<span class="string">"book.price"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">any</span> <span class="attr">ng-model</span>=<span class="string">"book.name"</span> /&gt;</span></div></pre></td></tr></table></figure>
<h3 id="8、应该如何从-service-中访问-scope-？"><a href="#8、应该如何从-service-中访问-scope-？" class="headerlink" title="8、应该如何从 service 中访问 scope ？"></a>8、应该如何从 service 中访问 scope ？</h3><p><code>$rootScope</code> 相当于 <code>ng-app</code> 标记，它能够被引导或者是服务注入，可以用于在所有的 scopes 上添加新功能和值</p>
<p><strong>注意：避免这样做–这相当于定义全局变量</strong></p>
<h3 id="9、module-factory-和-module-service-不同点是什么？"><a href="#9、module-factory-和-module-service-不同点是什么？" class="headerlink" title="9、module().factory() 和 module().service() 不同点是什么？"></a>9、<code>module().factory()</code> 和 <code>module().service()</code> 不同点是什么？</h3><p><a href="https://groups.google.com/forum/?fromgroups#!topic/angular/56sdORWEoqg" target="_blank" rel="external">查看讨论信息</a></p>
<h3 id="10、如何防止无样式的内容闪现（页面显示双大括号绑定表达式）？"><a href="#10、如何防止无样式的内容闪现（页面显示双大括号绑定表达式）？" class="headerlink" title="10、如何防止无样式的内容闪现（页面显示双大括号绑定表达式）？"></a>10、如何防止无样式的内容闪现（页面显示双大括号绑定表达式）？</h3><p>在一些地方使用 <code>ng-bind</code> 来替换双括号表达式</p>
<h3 id="11、为什么-lt-a-ng-click-quot-go-lt-￼5-gt-quot-gt-不工作？"><a href="#11、为什么-lt-a-ng-click-quot-go-lt-￼5-gt-quot-gt-不工作？" class="headerlink" title="11、为什么 &lt;a ng-click=&quot;go()&quot;&gt; 不工作？"></a>11、为什么 <code>&lt;a ng-click=&quot;go()&quot;&gt;</code> 不工作？</h3><p>仅有的 <code>ng-*</code> 属性中，需要 <code></code> 的只有 <code>ng-src</code> 和 <code>ng-href</code>，因为最终的结果必须是一个字符串，不是一个表达式。所以其他的不能工作。</p>
<h3 id="12、嵌套-routes-views"><a href="#12、嵌套-routes-views" class="headerlink" title="12、嵌套 routes/views?"></a>12、嵌套 routes/views?</h3><p>或许吧</p>
<h3 id="13、可以在行内指定模板或者是分部视图吗？"><a href="#13、可以在行内指定模板或者是分部视图吗？" class="headerlink" title="13、可以在行内指定模板或者是分部视图吗？"></a>13、可以在行内指定模板或者是分部视图吗？</h3><p>可以。可以采用 <code>&lt;script id=&quot;some/partial.html&quot; type=&quot;text/ng-template&quot;&gt;&lt;/script&gt;</code> ，Angular会使用它来替换。</p>
<h3 id="14、-如何在-ngResource-地址中使用端口？"><a href="#14、-如何在-ngResource-地址中使用端口？" class="headerlink" title="14、 如何在 ngResource 地址中使用端口？"></a>14、 如何在 ngResource 地址中使用端口？</h3><pre><code>如下：$resource(&apos;example.com\\:8080&apos;)
</code></pre><h3 id="15、为什么插件触发的change事件似乎不工作？"><a href="#15、为什么插件触发的change事件似乎不工作？" class="headerlink" title="15、为什么插件触发的change事件似乎不工作？"></a>15、为什么插件触发的change事件似乎不工作？</h3><p>Angular监视 <a href="https://developer.mozilla.org/en-US/docs/Web/Events/input" target="_blank" rel="external">input</a> 事件，不是’change’ 事件。</p>
<h3 id="16、不要使用jQuery来切换crap-待定：无效元素-，在行内使用一些变量标记。"><a href="#16、不要使用jQuery来切换crap-待定：无效元素-，在行内使用一些变量标记。" class="headerlink" title="16、不要使用jQuery来切换crap(待定：无效元素)，在行内使用一些变量标记。"></a>16、不要使用jQuery来切换crap(待定：无效元素)，在行内使用一些变量标记。</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">ng-click</span>=<span class="string">"flags.open=!flags.open"</span>&gt;</span>...<span class="tag">&lt;<span class="name">div</span> <span class="attr">ng-class</span>=<span class="string">"&#123;active:flags.open&#125;"</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="17、如何从DOM检查上查看-scope-？"><a href="#17、如何从DOM检查上查看-scope-？" class="headerlink" title="17、如何从DOM检查上查看 scope ？"></a>17、如何从DOM检查上查看 scope ？</h3><p>Google Chrome:安装 Batarang extension,检查一个DOM元素，然后在console中键入$scope</p>
<p>Firefox/Firebug：检查一个DOM元素，然后在console中键入 <code>angular.element($0).scope()</code><br>或者 <code>$($0).scope()</code></p>
<p>IE10+: 使用F12工具，检查一个元素。然后在console中键入 <code>angular.element($0).scope()</code><br>或者 <code>$($0).scope()</code></p>
<h3 id="18、你有一些好的指令示例-库吗？"><a href="#18、你有一些好的指令示例-库吗？" class="headerlink" title="18、你有一些好的指令示例/库吗？"></a>18、你有一些好的指令示例/库吗？</h3><p><a href="http://angular-ui.github.com/" target="_blank" rel="external">AngularUI</a> 是非常棒的AngularJS工具集合（甚至是更好的示例代码）</p>
<h3 id="19、IE？"><a href="#19、IE？" class="headerlink" title="19、IE？"></a>19、IE？</h3><p>针对IE8.0或者更早，你需要<a href="https://docs.angularjs.org/guide/ie" target="_blank" rel="external">阅读这个</a>和<a href="http://angular-ui.github.io/#ieshiv" target="_blank" rel="external">使用这个</a></p>
<h3 id="20、必须对路由使用"><a href="#20、必须对路由使用" class="headerlink" title="20、必须对路由使用#?"></a>20、必须对路由使用#?</h3><p>参考 <a href="https://docs.angularjs.org/api/ng/provider/$locationProvider" target="_blank" rel="external">$locationProvider</a></p>
<h3 id="21、你应该在尝试用指令包装jQuery插件前，优先尝试使用AngularUI-Passthru-Directive-uiJq"><a href="#21、你应该在尝试用指令包装jQuery插件前，优先尝试使用AngularUI-Passthru-Directive-uiJq" class="headerlink" title="21、你应该在尝试用指令包装jQuery插件前，优先尝试使用AngularUI Passthru Directive (uiJq) "></a>21、你应该在尝试用指令包装jQuery插件前，优先尝试使用<a href="http://angular-ui.github.io/#directives-jq" target="_blank" rel="external">AngularUI Passthru Directive (uiJq) </a></h3><h3 id="22、为什么我的-scope-watch-递归触发"><a href="#22、为什么我的-scope-watch-递归触发" class="headerlink" title="22、为什么我的 $scope.$watch() 递归触发?"></a>22、为什么我的 $scope.$watch() 递归触发?</h3><p>如果你在 $scope.$watch(newVal,oldVal)中改变 newVal ，它会重复触发。在 $watch 运行后，$scope 会重新评估，被观察对象将被重新触发。</p>
<h3 id="23、何时我需要使用-scope-apply"><a href="#23、何时我需要使用-scope-apply" class="headerlink" title="23、何时我需要使用 $scope.$apply() ?"></a>23、何时我需要使用 $scope.$apply() ?</h3><p>仅仅需要在没有angular 事件/回调时 使用 $scope.$apply()。它通常不属于任何地方。</p>
<h3 id="24、启用了-html5Mode-，如何获取-lt-a-href-gt-的后退行为？"><a href="#24、启用了-html5Mode-，如何获取-lt-a-href-gt-的后退行为？" class="headerlink" title="24、启用了 html5Mode ，如何获取&lt;a href /&gt;的后退行为？"></a>24、启用了 html5Mode ，如何获取&lt;a href /&gt;的后退行为？</h3><p>如果你想一个链接能够全页面刷新，那么只需要在a标记上添加 target=”_self”</p>
<h3 id="25、如何-preventDefualt-或-stopPropagation"><a href="#25、如何-preventDefualt-或-stopPropagation" class="headerlink" title="25、如何 .preventDefualt() 或 .stopPropagation() ?"></a>25、如何 .preventDefualt() 或 .stopPropagation() ?</h3><p>所有的 ng-click 和相关的绑定都注入了 $event 事件对象，你可以用它来调用 .preventDefualt()，甚至是对象传递给你的方法。</p>
<h3 id="26、AngularJS在我的Chrome扩展中不工作！"><a href="#26、AngularJS在我的Chrome扩展中不工作！" class="headerlink" title="26、AngularJS在我的Chrome扩展中不工作！"></a>26、AngularJS在我的Chrome扩展中不工作！</h3><p>你需要使用 <a href="http://docs.angularjs.org/api/ng.directive:ngCsp" target="_blank" rel="external">ng-csp</a></p>
<h3 id="27、如何缓存-http-和html-分部视图"><a href="#27、如何缓存-http-和html-分部视图" class="headerlink" title="27、如何缓存 $http 和html 分部视图"></a>27、如何缓存 $http 和html 分部视图</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//使用装饰器，添加缓存功能</span></div><div class="line">myAppModule.config(<span class="function"><span class="keyword">function</span>(<span class="params">$routeProvider, $provide</span>) </span>&#123;</div><div class="line">  $provide.decorator(<span class="string">'$http'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">$delegate</span>)</span>&#123;</div><div class="line">    <span class="keyword">var</span> get = $delegate.get;</div><div class="line">    $delegate.get = <span class="function"><span class="keyword">function</span>(<span class="params">url, config</span>)</span>&#123;</div><div class="line">      url += (url.indexOf(<span class="string">'?'</span>) !== <span class="number">-1</span>) ? <span class="string">'?'</span> : <span class="string">'&amp;'</span>;</div><div class="line">      url += <span class="string">'v='</span> + cacheBustVersion;</div><div class="line">      <span class="keyword">return</span> get(url, config);</div><div class="line">    &#125;;</div><div class="line">    <span class="keyword">return</span> $delegate;</div><div class="line">  &#125;);</div><div class="line">&#125;);</div></pre></td></tr></table></figure>
<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2><h3 id="1、拒绝-解决一个-q-defer-不通过"><a href="#1、拒绝-解决一个-q-defer-不通过" class="headerlink" title="1、拒绝/解决一个 $q.defer() 不通过"></a>1、拒绝/解决一个 $q.defer() 不通过</h3><p>你必须在处理它们的时候添加 <code>$scope.$apply()</code></p>
<h3 id="2、Jasmine-spyOn-不执行-spy’d-功能"><a href="#2、Jasmine-spyOn-不执行-spy’d-功能" class="headerlink" title="2、Jasmine spyOn() 不执行 spy’d 功能"></a>2、Jasmine spyOn() 不执行 spy’d 功能</h3><p>不一定是AngularJS的问题，但是你需要追加 <code>.addCallThrough()</code></p>
<hr><section class="comment"><div class="ds-thread" data-thread-key="/blog/2015/03/13/Angular相关/AngularJS官方FAQ/" data-title="AngularJS官方FAQ" data-url="http://hstarorg.github.io/blog/blog/2015/03/13/Angular相关/AngularJS官方FAQ/"></div></section><script>var _shortName = "6389370154370729000";</script><script>var duoshuoQuery = {};
duoshuoQuery["short_name"] = _shortName;
(function() {
    var ds = document.createElement("script");
    ds.type = "text/javascript";
    ds.async = true;
    ds.src = (document.location.protocol === "https:" ? "https:" : "http:") + "//static.duoshuo.com/embed.js";
    ds.charset = "utf-8";
    (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0]).appendChild(ds);
})();</script><footer><section class="copyright">&copy; 2016 - 2017<a href="/blog/">Jay.M.Hu</a></section><section class="intro">由<a href="https://hexo.io/">Hexo</a>驱动&middot;挂载<a href="https://github.com/xadillax/hexo-xnew">X'new</a>主题</section></footer></article></main><script src="//cdn.bootcss.com/Han/3.3.0/han.min.js"></script><script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script><script src="//cdn.bootcss.com/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script src="/blog/scripts/highlight.pack.js"></script><script>$(function() {
    $("header").backstretch("/images/header.jpeg");

    $("figure.highlight").each(function(i, block) {
        $(block).removeClass("highlight");
        $("<pre><code class='__tobehl " + ($(block).attr("class") === "plain" ? "" : ("lang-" + $(block).attr("class"))) + "'></code></pre>").insertAfter($(block));
        $(block).next().find("code").text((block.innerText || block.textContent));
        $(block).remove();
    });
    $(".__tobehl").each(function(i, block) {
        hljs.highlightBlock(block);
    });

    $("article.full img").each(function() {
        $(this).parent().css("text-align", "center");
    });

    if($(".article-toc").children().length < 2) {
        $(".article-toc").css("display", "none");
    }
});</script></body></html>